# announcement [![NPM version](https://badge.fury.io/js/announcement.svg)](http://badge.fury.io/js/announcement)

> Asynchronous event emitter and aggregator.

Install with [npm](https://www.npmjs.com/)

```sh
$ npm i announcement --save
```

## Running tests

Install dev dependencies:

```sh
$ npm i -d && npm test
```

## Usage

```js
var Announcement = require('announcement');
```

## API

### [Announcement](index.js#L28)

Main entry point of Announcement eventOrCommand emitter/aggregator

**Example**

```js
var Announcement = require('announcement');
var announcement = new Announcment();
```

### [.on](index.js#L57)

Register a listener for an eventOrCommand.

**Params**

* `eventOrCommand` **{String|Function}**: Event string or instance of a Command to listen for.
* `cb` **{Function}**: Callback invoked when `eventOrCommand` type is emitted.
* `returns` **{Function}**: Original callback function or handler function to use to remove listener.

**Example**

```js
announcement.on('user-registration', function (user) {
  // do something with user
});

var UserRegistrationCommand = function () {};
announcement.on(UserRegistrationCommand, function (userRegCmd) {
  // userRegCmd will be an instance of UserRegistrationCommand
  // do something with userRegCmd
});
```

### [.off](index.js#L94)

Removes a registered listener or CommandHandler The listener `cb` or the CommandHandler instance need to be the one returned from the `on` method.

**Params**

* `eventOrCommand` **{String|Function}**: Event string or instance of a CommandHandler to turn off.
* `cb` **{Function}**: Listener function that will be removed.
* `returns` **{Boolean}** `true`: if the listener existed before being removed.

**Example**

```js
// register listener
var listener = announcement.on('user-registration', function (user) {
  console.log(user);
});
// emit user-registration and see output from listener
announcement.emit('user-registration', { username: 'doowb' });
//=> { username: 'doowb' }

// remove listener
announcement.off('user-registration', listener);
// emit user-registration and nothing is output
announcement.emit('user-registration', { username: 'doowb' });
```

### [.once](index.js#L133)

Register a listener for an event or a command that will only execute once.

**Params**

* `eventOrCommand` **{String|Function}**: Event string or instance of a Command to listen for.
* `cb` **{Function}**: Callback invoked when `eventOrCommand` type is emitted.
* `returns` **{Function}**: Original callback function or handler function to use to remove listener.

**Example**

```js
announcement.once('user-registration', function (user) {
  // do something with user
});

var UserRegistrationCommand = function () {};
announcement.once(UserRegistrationCommand, function (userRegCmd) {
  // userRegCmd will be an instance of UserRegistrationCommand
  // do something with userRegCmd
});
```

### [.emit](index.js#L166)

Asynchronously emit an eventOrCommand and additional data.

**Params**

* `eventOrCommand` **{String|Object}**: Event string or instance of a Command to emit.

**Example**

```js
// emit string event
announcement.emit('user-registered', { username: 'doowb' });

// emit typed Command
var userRegCmd = new UserRegistrationCommand();
userRegCmd.user = { username: 'doowb' };
announcement.emit(userRegCmd);
```

## Contributing

Pull requests and stars are always welcome. For bugs and feature requests, [please create an issue](https://github.com/doowb/announcement/issues)

## Author

**Brian Woodward**

+ [github/doowb](https://github.com/doowb)
+ [twitter/doowb](http://twitter.com/doowb)

## License

Copyright Â© 2015 Brian Woodward
Released under the MIT license.

***

_This file was generated by [verb-cli](https://github.com/assemble/verb-cli) on July 16, 2015._